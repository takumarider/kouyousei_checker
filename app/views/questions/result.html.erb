<div class="min-h-screen bg-gradient-to-b from-blue-50 to-purple-50 py-8">
  <div class="container mx-auto px-4 max-w-3xl">
    <!-- メインカード -->
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
      <!-- ヘッダー部分 -->
      <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-8 text-center">
        <h1 class="text-4xl font-bold mb-2">診断結果</h1>
        <p class="text-lg opacity-90">あなたの高揚性診断が完了しました</p>
      </div>

      <% if @result.present? %>
        <!-- スコア表示部分 -->
        <div class="p-8 border-b border-gray-200">
          <div class="text-center">
            <p class="text-gray-600 mb-2">あなたの合計スコア</p>
            <div class="inline-flex items-baseline">
              <span class="text-6xl font-bold text-gray-800"><%= @total_score %></span>
              <span class="text-2xl text-gray-600 ml-2">点</span>
            </div>
            <div class="mt-4 inline-block px-4 py-2 bg-blue-50 rounded-full">
              <p class="text-sm text-blue-700">
                スコア範囲: <%= @result.min_score %> - <%= @result.max_score %>点
              </p>
            </div>
          </div>
        </div>

        <!-- レベル表示部分 -->
        <div class="p-8 border-b border-gray-200">
          <h2 class="text-xl font-semibold text-gray-700 mb-4 text-center">高揚性レベル</h2>
          <div class="flex justify-center">
            <div class="relative">
              <div class="w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center shadow-lg">
                <span class="text-5xl font-bold text-white"><%= @result.level %></span>
              </div>
              <% case @result.level %>
              <% when 'A' %>
                <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                  最高レベル
                </div>
              <% when 'B' %>
                <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                  高レベル
                </div>
              <% when 'C' %>
                <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                  中レベル
                </div>
              <% when 'D' %>
                <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                  低レベル
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <!-- コメント（アドバイス）部分 -->
        <div class="p-8 border-b border-gray-200">
          <h2 class="text-xl font-semibold text-gray-700 mb-4 text-center">アドバイス</h2>
          <div class="bg-gray-50 rounded-lg p-6">
            <p class="text-gray-700 leading-relaxed text-lg"><%= @result.comment %></p>
          </div>
        </div>

        <!-- シェアボタン部分 -->
        <div class="p-8 border-b border-gray-200">
          <h3 class="text-lg font-semibold text-gray-700 mb-4 text-center">結果をシェア</h3>
          <div class="flex justify-center space-x-4">
            <!-- Twitter シェアボタン -->
            <a href="https://twitter.com/intent/tweet?text=高揚性診断の結果：レベル<%= @result.level %>でした！%0A<%= CGI.escape(@result.comment[0..50]) %>...%0A&url=<%= request.url %>&hashtags=高揚性診断" 
               target="_blank" 
               rel="noopener noreferrer"
               class="inline-flex items-center px-6 py-3 bg-blue-400 hover:bg-blue-500 text-white font-semibold rounded-lg transition duration-200">
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
              </svg>
              X でシェア
            </a>

            <!-- LINE シェアボタン -->
            <a href="https://line.me/R/msg/text/?高揚性診断の結果：レベル<%= @result.level %>でした！%0A<%= CGI.escape(@result.comment[0..50]) %>...%0A<%= request.url %>" 
               target="_blank" 
               rel="noopener noreferrer"
               class="inline-flex items-center px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition duration-200">
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
              </svg>
              LINE でシェア
            </a>

            <!-- URLコピーボタン -->
            <button onclick="copyToClipboard('<%= request.url %>')" 
                    class="inline-flex items-center px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition duration-200">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
              </svg>
              URLをコピー
            </button>
          </div>
        </div>

      <% else %>
        <!-- エラー表示 -->
        <div class="p-8 text-center">
          <div class="inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4">
            <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <p class="text-gray-700 text-lg">該当する診断結果が見つかりませんでした。</p>
        </div>
      <% end %>

      <!-- アクションボタン -->
      <div class="p-8 bg-gray-50 text-center">
        <%= link_to questions_path, class: "inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg hover:from-blue-600 hover:to-purple-700 transition duration-200 shadow-lg" do %>
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          もう一度診断する
        <% end %>
      </div>
    </div>

    <!-- フッター情報 -->
    <div class="mt-6 text-center text-gray-500 text-sm">
      <p>診断日時: <%= Time.current.strftime("%Y年%m月%d日 %H:%M") %></p>
    </div>
  </div>
</div>

<script>
function copyToClipboard(text) {
  navigator.clipboard.writeText(text).then(function() {
    alert('URLをコピーしました！');
  }, function(err) {
    console.error('コピーに失敗しました: ', err);
  });
}
</script>
